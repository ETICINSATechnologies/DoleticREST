<?php

namespace KernelBundle\Repository;

/**
 * UserRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class UserRepository extends DoleticRepository
{
    public function findPresident()
    {
        $presidentPosition = $this->getEntityManager()->getRepository('KernelBundle:Position')->findOneBy(['president' => true]);
        if (isset($presidentPosition)) {
            $userPosition = $this->getEntityManager()->getRepository('KernelBundle:UserPosition')
                ->findOneBy(
                    [
                        'position' => $presidentPosition,
                        'active' => true,
                        'main' => true
                    ],
                    [
                        'startDate' => 'ASC'
                    ]
                );
            return isset($userPosition) ? $userPosition->getUser() : null;
        }
        return null;
    }
}
